<!-- filepath: /home/pouria/projects/github/client-ease/app/templates/invoice/index.html -->
{% from "form_helpers.html" import per_page_menu %}
{% from "form_helpers.html" import page_navigation %}

{% extends "base.html" %}

{% block title %}
Invoices - Client Ease
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2>Invoices</h2>
  <div class="d-flex justify-content-between align-items-center mb-3">
    {{ per_page_menu(pagination_object=invoices, route=url_for('invoice.get_invoices'), label='Invoices per page:') }}
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Invoice Number</th>
        <th scope="col">Client</th>
        <th scope="col">Date Issued</th>
        <th scope="col">Total Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for invoice in invoices %}
        <tr onclick="window.location='{{ url_for('invoice.view_invoice', id=invoice.id) }}';" style="cursor:pointer;">
          <td>{{ invoice.id }}</td>
          <td>{{ invoice.client.name }}</td>
          <td>{{ invoice.date.date() }}</td>
          <td>{{ invoice.amount }}</td>
        </tr>
      {% else %}
        <tr>
          <td colspan="4" class="text-muted">No invoices found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {{ page_navigation(paginate_object=invoices, view_endpoint='invoice.get_invoices') }}

</div>
{% endblock %}